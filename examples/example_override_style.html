<html>
<head>
  <link rel="stylesheet" href="../assets/stylesheets/style.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
		#holder
    {
      width: 100%;
      height: 75%;
    }

    #load
    {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
    }

    p
    {
      color: white;
    }
	</style>

  <script src="../src/waveslab.js"></script>
</head>
<body class="theme">
  <div class="flex-box" style="height: 50%; margin-top: 10%">
    <div class="flex-item flex-item-thirds">
      <div class="card">
        <table class="waveslab-table">
          <tr onClick="selectSong('../assets/audios/dubstep.mp3');">
            <td>1:23</td>
            <td>Dubstep</td>
            <td class="material-icons">favorite</td>
          </tr>
          <tr onClick="selectSong('../assets/audios/betterdays.mp3');">
            <td>2:34</td>
            <td>Better Days</td>
            <td class="material-icons">favorite</td>
          </tr>
          <tr onClick="selectSong('../assets/audios/slowmotion.mp3');">
            <td>0:01</td>
            <td>Slow Motion</td>
            <td class="material-icons">favorite</td>
          </tr>
          <tr onClick="selectSong('../assets/audios/veloma.mp3');">
            <td>0:01</td>
            <td>Veloma</td>
            <td class="material-icons">favorite</td>
          </tr>
        </table>
      </div>
    </div>
    <div class="flex-item flex-item-thirds">
      <div class="card">
        <div id="holder"></div>
        <button id="btn" class="material-icons btn-square" type="button" onclick="wave.playPause();toggleIcon();">play_arrow</button>
      </div>
    </div>
    <div class="flex-item flex-item-thirds">
      <div class="card">
        <table class="waveslab-table">
          <tr>
            <td>Theme 1</td>
          </tr>
          <tr>
            <td>Theme 2</td>
          </tr>
          <tr>
            <td>Theme 3</td>
          </tr>
          <tr>
            <td>Theme 4</td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <script>
    var wave = new FrequencyChart({container: "holder"});
    var isPlay = true;

    //overriding setBarStyle for advanced users
    wave.drawBars = function(currentX, barWidth, barHeight, amplitude, ctx, ctxHeight){
      //top bars
      ctx.fillStyle = 'rgb(50,'+ (currentX) +',' + (barHeight + 100) +')';
      ctx.fillRect(currentX,ctxHeight/2-barHeight * amplitude,barWidth,barHeight * amplitude);

      //bottom reflected bars
      ctx.fillStyle = 'rgba(50,'+ (currentX) +',' + (barHeight + 100) + ', 0.3)';
      ctx.fillRect(currentX, ctxHeight/2, barWidth, barHeight/5);
    }
    wave.generate("../assets/audios/slowmotion.mp3");

    function toggleIcon()
    {
      if(isPlay)
      {
        document.getElementById("btn").textContent = "pause";
        isPlay = false;
      }
      else
      {
        document.getElementById("btn").textContent = "play_arrow";
        isPlay = true;
      }
    }

    function selectSong(song)
    {
      if(!isPlay)
      {
        toggleIcon();
      }

      wave.stop();
      wave.resetPlayback();
      wave.generate(song);
    }
  </script>
</body>
